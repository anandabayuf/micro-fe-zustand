"use strict";(self.webpackChunkcontainer=self.webpackChunkcontainer||[]).push([[901],{5901:function(e,n,t){t.r(n);var r,c,o=t(8416),u=t.n(o),i=t(1250),a=t(2083),s=t(3433),l=t(1413),d=t(184),f=u().lazy((function(){return t.e(399).then(t.bind(t,6399))})),p=u().lazy((function(){return t.e(862).then(t.t.bind(t,1862,23))})),h=[{path:"/",element:(0,d.jsx)(a.Navigate,{to:"/login",replace:!0})},{path:"/login",element:(0,d.jsx)(f,{})},{path:"*",element:(0,d.jsx)(a.Navigate,{to:"/login",replace:!0})}],v=[{path:"/home",element:(0,d.jsx)(p,{})}],y=t(8124),g=t(8507),m=function(){var e=(0,a.useNavigate)(),n=(0,y.BG)().accessToken;return u().useEffect((function(){!function(){var t=(0,g.$R)(n);console.log(n),!(!n||!t)||e("/login")}()}),[n]),n?(0,d.jsx)(u().Suspense,{fallback:"Loading...",children:(0,d.jsx)(a.Outlet,{})}):(0,d.jsx)(d.Fragment,{})},k=function(){return(0,d.jsx)(u().Suspense,{fallback:"Loading...",children:(0,d.jsxs)(a.Routes,{children:[h.map((function(e,n){return(0,d.jsx)(a.Route,(0,l.Z)({},e),n)})),(0,d.jsx)(a.Route,{element:(0,d.jsx)(m,{}),children:(0,s.Z)(v).map((function(e,n){return(0,d.jsx)(a.Route,{path:null===e||void 0===e?void 0:e.path,element:null===e||void 0===e?void 0:e.element},n)}))})]})})},b=function(){return(0,d.jsx)(a.BrowserRouter,{children:(0,d.jsx)(k,{})})},T=function(e){e&&e instanceof Function&&t.e(165).then(t.t.bind(t,3165,23)).then((function(n){var t=n.getCLS,r=n.getFID,c=n.getFCP,o=n.getLCP,u=n.getTTFB;t(e),r(e),c(e),o(e),u(e)}))},x=t(1593),S=t(9250),j=t(4942),P=t(2860),w=t(5395),A=t(3076),Z=t(9071),K=(0,Z.createApi)({reducerPath:"publicKeySlice",baseQuery:(0,Z.fetchBaseQuery)({baseUrl:A.z9}),endpoints:function(e){return{getPublicKey:e.query({query:function(){return"/public/publickey"}})}}}),L=(K.useGetPublicKeyQuery,K),I=t(4152),N=t.n(I),R=(0,P.combineReducers)((0,l.Z)((r={auth:y.ZP},(0,j.Z)(r,w.Z.reducerPath,w.Z.reducer),(0,j.Z)(r,L.reducerPath,L.reducer),r),N())),C=t(8690),E=t.n(C),O=t(1734),B=t(5263),G=[function(e){return function(e){return function(n){e(n)}}}],Q=[w.Z.middleware,L.middleware],D=(0,S.configureStore)({reducer:function(e,n){return"auth/removeAccessToken"===n.type?R(void 0,n):R(e,n)},middleware:(c=(new S.MiddlewareArray).concat(O.Z,E())).concat.apply(c,Q.concat(G)),devTools:!0});(0,B.setupListeners)(D.dispatch);var M=D;i.createRoot(document.getElementById("root")).render((0,d.jsx)(u().StrictMode,{children:(0,d.jsx)(x.Provider,{store:M,children:(0,d.jsx)(b,{})})})),T()},4054:function(e,n,t){t.d(n,{D:function(){return o},i:function(){return c}});var r=t(7846),c="container",o=[r.Oc.ALL,r.Oc.CMS,r.Oc.PENDINGTASK]},8124:function(e,n,t){t.d(n,{ZP:function(){return g},yL:function(){return h},M8:function(){return p},Dh:function(){return v},BG:function(){return y}});var r=t(1593).useSelector,c=t(9367),o=t(8507),u=t(9250),i=t(8210),a=t.n(i),s=t(9341),l={accessToken:(0,s.e)("accessToken"),publicKey:(0,s.e)("publicKey"),userInfo:(0,o.$R)((0,s.e)("accessToken"))},d=(0,u.createSlice)({name:"auth",initialState:l,reducers:{setAccessToken:function(e,n){return(0,s.d)("accessToken",n.payload),a()(e,(function(e){e.accessToken=n.payload,e.userInfo=(0,o.$R)(n.payload)}))},setPublicKey:function(e,n){return(0,s.d)("publicKey",n.payload),a()(e,(function(e){e.publicKey=n.payload}))},removeAccessToken:function(e){return(0,c.Qd)("accessToken"),a()(e,(function(e){e.accessToken=null,e.userInfo=null}))}}}),f=d.actions,p=f.setAccessToken,h=f.removeAccessToken,v=f.setPublicKey,y=function(){return r((function(e){return e.auth}))},g=d.reducer},3076:function(e,n,t){t.d(n,{CT:function(){return r},z9:function(){return c}});var r="http://34.101.158.242:8006",c="http://34.101.71.39:9037"},7846:function(e,n,t){t.d(n,{Ik:function(){return c},Oc:function(){return r}});var r=function(e){return e.ALL="all",e.CMS="cms",e.PENDINGTASK="PENDINGTASK",e}({}),c=function(e){return e.GET="GET",e.POST="POST",e}({})},5395:function(e,n,t){var r=t(4165),c=t(5861),o=t(8124),u=t(9367),i=t(9071),a=t(3076),s=t(4054),l=t(9341),d=(0,i.fetchBaseQuery)({baseUrl:a.CT,prepareHeaders:function(e,n){var t=n.getState();if("login"!==n.endpoint){var r=t.auth.accessToken||(0,l.e)("accessToken");e.set("Authorization","Bearer ".concat(r))}return e}}),f=function(){var e=(0,c.Z)((0,r.Z)().mark((function e(n,t,c){var i,a,s,f,p,h,v;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d(n,t,c);case 2:if(f=e.sent,null===(i=f.error)||void 0===i||!i.data){e.next=8;break}if(!1!==(null===(p=f.error)||void 0===p||null===(h=p.data)||void 0===h?void 0:h.business)){e.next=6;break}return e.abrupt("return",f);case 6:"jwtverification.exception.001"===f.error.data.message&&(t.dispatch((0,o.yL)()),(0,u.Qd)("accessToken"));case 8:return(v=null===(a=f.meta)||void 0===a||null===(s=a.response)||void 0===s?void 0:s.headers.get("access_token"))&&(t.dispatch((0,o.M8)(v)),(0,l.d)("accessToken",v)),e.abrupt("return",f);case 11:case"end":return e.stop()}}),e)})));return function(n,t,r){return e.apply(this,arguments)}}(),p=(0,i.createApi)({baseQuery:f,tagTypes:s.D,endpoints:function(){return{}}});n.Z=p},9341:function(e,n,t){t.d(n,{d:function(){return o},e:function(){return c}});var r="http://192.168.56.99",c=function(e){for(var n=document.cookie.split(";"),t=0;t<n.length;t++){var r=n[t].split("=");if(r[0]===e)return r[1]}},o=function(e,n){var t=r.split("http://")[1];document.cookie="".concat(e,"=").concat(n,";domain=").concat(t)}},9367:function(e,n,t){t.d(n,{Qd:function(){return c}});var r=t(4054),c=function(e){try{var n=window.localStorage.getItem(r.i),t=JSON.parse(n);localStorage&&"object"===typeof t&&("string"===typeof e&&delete t[e],e instanceof Array&&e.forEach((function(e){return delete t[e]})),window.localStorage.setItem(r.i,JSON.stringify(t)))}catch(c){console.error("Error when remove local storage object item function is triggered - LocalStorageUtils. ".concat(c))}}},8507:function(e,n,t){t.d(n,{$R:function(){return o}});var r=t(5266),c=t.n(r);t(5103);function o(e){return c().decode(e)}}}]);
//# sourceMappingURL=901.10d8dc92.chunk.js.map